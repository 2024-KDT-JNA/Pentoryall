<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{/layout/default}">

<th:block layout:fragment="style">
	<link rel="stylesheet" th:href="@{/css/sub.css}" href="/css/sub.css" />
</th:block>

<th:block layout:fragment="content">
	<div class="story-content">
		<div class="inner">
			<section>
				<h2>구독/멤버십</h2>
				<div>
					<button onclick="location.href='/subscribe/storyList'">구독</button>
					<button onclick="location.href='/membership/membershipJoinList'">멤버십</button>
				</div>
				<div>
					<button onclick="location.href='/subscribe/storyList'">스토리</button>
					<button onclick="location.href='/subscribe/postList'">포스트</button>
				</div>
				<div>
					<h3 class="h3">스토리</h3>
					<span th:text="${subscriberStoryCount}">00</span>명
				</div>
				<div th:if="${subscribers != null and subscribers.size() > 0}">
					<div th:each="subscribe : ${subscribers}">
						<p th:text="${subscribe.nickname}"></p>
						<p th:text="${subscribe.introduction}"></p>
						<p th:text="${subscribe.subscribedDate}"></p>
						<button class="button" id="subscribeButton" onclick="addSubscribe(${subscribe.userCode})">구독</button>
					</div>
				</div>
			</section>
		</div>
	</div>
</th:block>

<th:block layout:fragment="script">
	<script>
		function addSubscribe(userCode) {
			$.ajax({
				type: "POST",
				url: "/subscribe/add",
				data: {
					userCode: userCode
				},
				success: function(response) {
					alert("구독이 성공적으로 추가되었습니다.");
				},
				error: function(xhr, status, error) {
					alert("구독 추가에 실패했습니다. 다시 시도해주세요.");
				}
			});
		}
	</script>
</th:block>
</html>
































<!--<!DOCTYPE html>-->
<!--<html xmlns:th="http://www.thymeleaf.org"-->
<!--	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"-->
<!--	  layout:decorate="~{/layout/default}">-->

<!--<th:block layout:fragment="style">-->
<!--	<link rel="stylesheet" th:href="@{/css/sub.css}" href="/css/sub.css" />-->

<!--	&lt;!&ndash;    <link rel="stylesheet" th:href="@{/css/story.css}" href="/css/story.css" />&ndash;&gt;-->
<!--	&lt;!&ndash; 여기에 연결할 외부 CSS 링크를 지정 &ndash;&gt;-->
<!--	&lt;!&ndash; 생성한 CSS 파일은 `/resources/static/css` 에 넣어주세요. &ndash;&gt;-->
<!--	&lt;!&ndash; [작성 예시] <link rel="stylesheet" th:href="@{/css/파일명.css}" href="/css/파일명.css" /> &ndash;&gt;-->
<!--</th:block>-->

<!--<th:block layout:fragment="content">-->
<!--	<div class="story-content">-->
<!--		<div class="inner">-->
<!--			&lt;!&ndash; h2 타이틀을 사용하는 컨텐츠들을 section으로 묶어서 관리해주세요. &ndash;&gt;-->
<!--	<section>-->
<!--		<h2>구독/멤버십</h2>-->
<!--		<div>-->
<!--			<button onclick="location.href='/subscribe/storyList'">구독</button>-->
<!--			<button onclick="location.href='/membership/list'">멤버십</button>-->
<!--		</div>-->
<!--		<div>-->
<!--			<button onclick="location.href='/subscribe/storyList'">스토리</button>-->
<!--			<button onclick="location.href='/subscribe/postList'">포스트</button>-->
<!--		</div>-->
<!--		<div>-->
<!--			<h3 class="h3">스토리</h3>-->
<!--			<p>총-->
<!--				<span th:text="${subscriberStoryCount}">00</span>명</p>-->
<!--		</div>-->
<!--		<div th:if="${subscribers != null and subscribers.size() > 0}">-->
<!--			<div th:each="subscribe : ${subscribers}">-->
<!--				<p th:text="${subscribe.nickname}"></p>-->
<!--				<p th:text="${subscribe.introduction}"></p>-->
<!--				<p th:text="${subscribe.subscribedDate}"></p>-->
<!--				<button class="button" id="subscribeButton" onclick="addSubscribe(${subscribe.userCode})">구독</button>-->
<!--			</div>-->
<!--		</div>-->
<!--	</section>-->
<!--		</div>-->
<!--	</div>-->
<!--</th:block>-->

<!--<th:block layout:fragment="script">-->
<!--	<script>-->
<!--		function addSubscribe(userCode) {-->
<!--			$.ajax({-->
<!--				type: "POST",-->
<!--				url: "/subscribe/add",-->
<!--				data: {-->
<!--					userCode: userCode-->
<!--				},-->
<!--				success: function(response) {-->
<!--					alert("구독이 성공적으로 추가되었습니다.");-->
<!--				},-->
<!--				error: function(xhr, status, error) {-->
<!--					alert("구독 추가에 실패했습니다. 다시 시도해주세요.");-->
<!--				}-->
<!--			});-->
<!--		}-->
<!--	</script>-->
<!--</th:block>-->
<!--</html>-->
