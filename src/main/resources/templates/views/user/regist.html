<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{/layout/default}">

<th:block layout:fragment="link">
    <link rel="stylesheet" th:href="@{/css/sub.css}" href="/css/sub.css"/>
    <!-- 여기에 연결할 외부 CSS 링크를 지정 -->
    <!-- 생성한 CSS 파일은 `/resources/static/css` 에 넣어주세요. -->
    <link rel="stylesheet" th:href="@{/css/user.css}" href="/css/user.css"/>
</th:block>

<th:block layout:fragment="content">
    <div class="sub-content">
        <div class="inner">
            <!-- 한 페이지 당 컨텐츠는 section으로 묶습니다. -->
            <section class="section">
                <div class="titleWrap">
                    <h2>회원가입</h2>
                    <h5><span class="red_star">*</span>필수입력사항</h5>
                </div>
                <form class="regist_form" action="/user/regist" method="post">
                    <div class="registWrap">
                        <div class="inputWrap">
                            <label for="user_email">이메일<span class="red_star">*</span></label>
                            <div class="input_box">
                                <input type="email" name="email" id="user_email" placeholder="이메일을 입력해주세요."
                                       required/>
                                <button type="button">인증</button>
                            </div>
                        </div>
                        <div class="inputWrap">
                            <div class="input_box">
                                <input type="text" id="email_num" placeholder="인증번호 입력"/>
                                <button type="button">확인</button>
                            </div>
                        </div>
                        <div class="inputWrap">
                            <label for="user_name">이름<span class="red_star">*</span></label>
                            <div class="input_box">
                                <input type="text" name="name" id="user_name" placeholder="이름을 입력해주세요." required/>
                            </div>
                        </div>
                        <div class="inputWrap">
                            <label for="password">비밀번호<span class="red_star">*</span></label>
                            <div class="input_box">
                                <input type="password" name="password" id="password"
                                       placeholder="비밀번호를 입력해주세요. (문자, 숫자, 특수문자 포함 8자 ~ 20자 이내)" required/>
                            </div>
                        </div>
                        <div class="inputWrap">
                            <label for="userId">아이디<span class="red_star">*</span></label>
                            <div class="input_box">
                                <input type="text" name="userId" id="userId"
                                       placeholder="아이디를 입력해주세요.(영어,숫자 포함 5자 ~ 11자 이내)" maxlength="11" required/>
                                <button type="button" id="duplicationCheck" value="중복확인" disabled>중복확인</button>
                            </div>
                        </div>
                        <div class="success-message hide col_red">사용할 수 있는 아이디입니다</div>
                        <div class="failure-message hide col_red">아이디는 5~11글자이어야 합니다</div>
                        <div class="failure-message2 hide col_red">영어 또는 숫자만 가능합니다</div>
                        <div class="failure-message3 hide col_red">이미 존재하는 아이디입니다</div>
                        <div class="inputWrap">
                            <label for="user_nickname">닉네임<span class="red_star">*</span></label>
                            <div class="input_box">
                                <input type="text" name="nickname" id="user_nickname" placeholder="닉네임을 입력해주세요."
                                       required/>
                                <button type="button">중복확인</button>
                            </div>
                        </div>
                        <div class="inputWrap">
                            <label for="user_date">생년월일<span class="red_star">*</span></label>
                            <div class="input_box">
                                <input type="date" name="birth" id="user_date" placeholder="YY /   MM   /    DD"
                                       required/>
                            </div>
                        </div>
                    </div>
                    <div class="agreeWrap">
                        <div class="inputWrap">
                            <label for="user_date">이용약관동의<span class="red_star">*</span></label>
                            <div class="checkBoxWrap">
                                <div class="check_box">
                                    <input type="checkbox" id="agree_all"/>
                                    <label for="agree_all">
                                        <span></span>
                                        <p>
                                            전체 동의합니다.
                                        </p>
                                    </label>
                                </div>
                                <div class="check_box">
                                    <input type="checkbox" id="agree_check1" class="normal"/>
                                    <label for="agree_check1">
                                        <span></span>
                                        <p>
                                            이용약관 동의(필수)
                                        </p>
                                    </label>
                                </div>
                                <div class="check_box">
                                    <input type="checkbox" id="agree_check2" class="normal"/>
                                    <label for="agree_check2">
                                        <span></span>
                                        <p>
                                            이용약관 동의(필수)
                                        </p>
                                    </label>
                                </div>
                                <div class="check_box">
                                    <input type="checkbox" id="agree_check3" class="normal"/>
                                    <label for="agree_check3">
                                        <span></span>
                                        <p>
                                            이용약관 동의(필수)
                                        </p>
                                    </label>
                                </div>
                                <div class="check_box">
                                    <input type="checkbox" id="agree_check4" class="normal"/>
                                    <label for="agree_check4">
                                        <span></span>
                                        <p>
                                            본인은 만 14세 이상입니다.
                                        </p>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="black_btns btns">
                        <button class="btn" type="submit">가입하기</button>
                    </div>
                </form>
            </section>
            <!-- ------------------------------------ -->
        </div>
    </div>
</th:block>

<th:block layout:fragment="script">
    <!-- 여기에 연결할 외부 javascript 링크를 지정 -->
    <!-- 생성한 CSS 파일은 `/resources/static/js` 에 넣어주세요. -->
    <script th:src="@{/js/common.js}" src="/js/common.js"></script>
    <script th:src="@{/js/event.js}" src="/js/event.js"></script>
    <script th:src="@{/js/user.js}" src="/js/user.js"></script>
    <script th:src="@{/js/user.js}" src="/js/agree.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // 전체 동의 체크박스
            var agreeAllCheckbox = document.getElementById("agree_all");
            // 다른 동의 체크박스들
            var agreeCheckboxes = document.querySelectorAll(".normal");

            // 전체 동의 체크박스의 변경 이벤트 리스너 추가
            agreeAllCheckbox.addEventListener("change", function () {
                // 전체 동의 체크박스의 상태에 따라 다른 동의 체크박스 상태 변경
                agreeCheckboxes.forEach(function (checkbox) {
                    checkbox.checked = agreeAllCheckbox.checked;
                });
            });

            // 다른 동의 체크박스들의 변경 이벤트 리스너 추가
            agreeCheckboxes.forEach(function (checkbox) {
                checkbox.addEventListener("change", function () {
                    // 다른 동의 체크박스 중 하나라도 선택 해제되면 전체 동의 체크박스의 선택도 해제
                    if (!this.checked) {
                        agreeAllCheckbox.checked = false;
                    } else {
                        // 모든 다른 동의 체크박스가 선택되었는지 확인하여 전체 동의 체크박스 선택 여부 업데이트
                        var allChecked = true;
                        agreeCheckboxes.forEach(function (checkbox) {
                            if (!checkbox.checked) {
                                allChecked = false;
                            }
                        });
                        agreeAllCheckbox.checked = allChecked;
                    }
                });
            });
        });
    </script>
</th:block>
</html>