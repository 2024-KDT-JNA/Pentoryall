<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <title>보관함 > 좋아요(좋아요 한 작품이 있을 때)</title>
    <!-- favicon -->
    <!-- <link rel="icon" type="image/png" href="/assets/img/brand/favicon.png" /> -->
    <!-- <link rel="apple-touch-icon" type="image/png" href="/img/brand/apple-touch-icon.png" /> -->
    <!-- CSS -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap"/>
    <link rel="stylesheet" as="style" crossorigin
          href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css"/>
    <link rel="stylesheet" ref="https://cdn.jsdelivr.net/npm/swiper@11.0.7/swiper-bundle.min.css"/>
    <link rel="stylesheet" href="/css/reset.css"/>
    <link rel="stylesheet" href="/css/common.css"/>
    <link rel="stylesheet" href="/css/user.css"/>
    <!-- Font Awesome 아이콘 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <!-- JS -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11.0.7/swiper-bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
<div id="wrap">
    <!-- header area -->
    <header id="header">header here</header>
    <!-- main content area -->
    <div id="main">
        <div class="container">
            <div class="notLikePage likePage">
                <ul class="storage_box">
                    <li class="storage_box_list"><a href="">좋아요 한 작품</a></li>
                    <li class="storage_box_list"><a href="">유료 구매 작품</a></li>
                </ul>
                <div class="search_info">
                    <div class="case_filter">
                        <div class="case_filter_label" onclick="">
                            <span>검색할 정보를 선택해주세요.</span>
                            <img class="toggleBtn" src="https://www.exsoft.co.kr/theme/exsoft/img/down.svg">
                        </div>
                        <form name="fsearch" method="get" class="search_form" style="width:100%">
                            <input type="hidden" name="bo_table" value="customer">
                            <input type="hidden" name="sca" value="">
                            <input type="hidden" name="sop" value="and">
                        </form>
                        <div class="case_filter_content">
                            <div class="case_filter_data">
                                <b>장르</b>
                                <div class="case_filter_list">
                                    <label>
                                        <input type="checkbox" name="check_group[]" value="장르"
                                               class=" group_chk findChk">
                                        <span class="gro list">장르</span>
                                    </label>
                                    <label>
                                        <input type="checkbox" name="check_group[]" value="장르"
                                               class=" group_chk findChk">
                                        <span class="gro list">장르</span>
                                    </label>
                                    <label>
                                        <input type="checkbox" name="check_group[]" value="장르"
                                               class=" group_chk findChk">
                                        <span class="gro list">장르</span>
                                    </label>
                                    <label>
                                        <input type="checkbox" name="check_group[]" value="장르"
                                               class=" group_chk findChk">
                                        <span class="gro list">장르</span>
                                    </label>
                                    <label>
                                        <input type="checkbox" name="check_group[]" value="장르"
                                               class=" group_chk findChk">
                                        <span class="gro list">장르</span>
                                    </label>
                                    <label>
                                        <input type="checkbox" name="check_group[]" value="장르"
                                               class=" group_chk findChk">
                                        <span class="gro list">장르</span>
                                    </label>
                                    <label>
                                        <input type="checkbox" name="check_group[]" value="장르"
                                               class=" group_chk findChk">
                                        <span class="gro list">장르</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="like_post">
                    <h5>3개의 포스트</h5>
                    <div class="like_post_info">

                    </div>
                </div>
                <h1>좋아요 예시버튼</h1>
                <button class="likeBtn"><i class="far fa-heart"></i></button>
            </div>
        </div>
    </div>
    <!-- footer area -->
    <footer id="footer">footer here</footer>
</div>
<script>
    const toggleBtn = document.querySelector('.toggleBtn');
    const relationList = document.querySelector('.case_filter_content');

    toggleBtn.addEventListener('click', (event) => {
        relationList.classList.toggle('active');
        event.currentTarget.classList.toggle('close');
    });
</script>
<script>
    var isLiked = false;

    // let board_no = ${Detail.freeboard_no};
    // let user_no = '${login.user_id}';
    let postCode = 6;
    let userCode = 4;
    // if (isLiked > 0) {
    //     console.log(isLiked + "좋아요 누름");
    //     $('.LikeBtn').html("좋아요 취소");
    //     $('.LikeBtn').click(function () {
    //         $.ajax({
    //             type: 'post',
    //             // url: '<c:url value ="/user/likeDown"/>',
    //             url: '/user/likeDown', // 직접 URL 입력
    //             contentType: 'application/json',
    //             data: JSON.stringify(
    //                 {
    //                     postCode,
    //                     userCode
    //                 }
    //             ),
    //             success: function (data) {
    //                 alert('취소 성공');
    //             }
    //         })// 아작스 끝
    //     })
    //
    // } else {
    //     console.log(isLiked + "좋아요 안누름")
    //     console.log(userCode);
    //     $('.LikeBtn').click(function () {
    //         $.ajax({
    //             type: 'post',
    //             // url: '<c:url value ="/user/likeUp"/>',
    //             url: '/user/likeUp', // 직접 URL 입력
    //             contentType: 'application/json',
    //             data: JSON.stringify(
    //                 {
    //                     postCode,
    //                     userCode
    //                 }
    //             ),
    //             success: function (data) {
    //                 alert('성공염');
    //             }
    //         })// 아작스 끝
    //     })
    // }
    $('.likeBtn').click(function () {
        if (isLiked) {
            // 이미 좋아요를 누른 상태라면, 좋아요 취소 요청을 보냅니다.
            $.ajax({
                type: 'post',
                url: '/user/likeDown', // 좋아요 취소 요청을 보내는 URL
                contentType: 'application/json',
                data: JSON.stringify({
                    postCode,
                    userCode
                }),
                success: function (data) {
                    // 성공적으로 처리되면 좋아요를 취소한 것으로 간주하고 버튼의 텍스트를 변경합니다.
                    isLiked = false;
                    $('.likeBtn').html('<i class="far fa-heart"></i>');
                    // $('.likeBtn').text("좋아요");
                    console.log("좋아요 취소 성공");
                    // alert('취소 성공');
                }
            });
        } else {
            // 좋아요를 누르지 않은 상태라면, 좋아요 요청을 보냅니다.
            $.ajax({
                type: 'post',
                url: '/user/likeUp', // 좋아요 요청을 보내는 URL
                contentType: 'application/json',
                data: JSON.stringify({
                    postCode,
                    userCode
                }),
                success: function (data) {
                    // 성공적으로 처리되면 좋아요를 한 것으로 간주하고 버튼의 텍스트를 변경합니다.
                    isLiked = true;
                    $('.likeBtn').html('<i class="fas fa-heart"></i>');
                    // $('.likeBtn').text("좋아요 취소");
                    console.log("좋아요 성공");
                    // alert('성공염');
                }
            });
        }
    });
    // const likeStatus = localStorage.getItem('likeStatus') === 'true';
    //
    // // 좋아요 버튼 초기 상태 설정
    // const likeBtn = document.querySelector('.likeBtn');
    // likeBtn.innerHTML = likeStatus ? '<i class="fas fa-heart"></i>' : '<i class="far fa-heart"></i>';
    //
    // // 좋아요 버튼 클릭 시 상태 변경
    // likeBtn.addEventListener('click', function () {
    //     // 현재 상태 반전
    //     const newStatus = !likeStatus;
    //     // 로컬 스토리지에 상태 저장
    //     localStorage.setItem('likeStatus', newStatus);
    //     // 버튼 아이콘 변경
    //     likeBtn.innerHTML = newStatus ? '<i class="fas fa-heart"></i>' : '<i class="far fa-heart"></i>';
    //
    //     // 여기에 좋아요 상태에 따른 서버 요청 코드 추가
    //     // 예: 서버에 좋아요 상태를 전달하여 저장하거나 삭제하는 등의 작업 수행
    //     // 예: 좋아요 상태를 전송할 때, 서버에서 필요한 데이터도 함께 전송해야 합니다.
    // });
</script>
</body>
</html>